{"ast":null,"code":"var _jsxFileName = \"D:\\\\live project url\\\\live\\\\Event\\\\frontend\\\\src\\\\context\\\\AuthContext.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport { createContext, useState, useContext, useEffect } from \"react\";\nimport api from \"../services/api\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext();\nexport const useAuth = () => {\n  _s();\n  return useContext(AuthContext);\n};\n_s(useAuth, \"gDsCjeeItUuvgOWf1v4qoK9RF6k=\");\nexport const AuthProvider = ({\n  children\n}) => {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [isAuthenticated, setIsAuthenticated] = useState(false);\n  const [loading, setLoading] = useState(true);\n  useEffect(() => {\n    // Check if user is logged in\n    const checkAuth = async () => {\n      const token = localStorage.getItem(\"token\");\n      if (token) {\n        try {\n          api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n          const response = await api.get(\"/api/users/me\");\n          setUser(response.data);\n          setIsAuthenticated(true);\n        } catch (error) {\n          console.error(\"Authentication error:\", error);\n          localStorage.removeItem(\"token\");\n          delete api.defaults.headers.common[\"Authorization\"];\n        }\n      }\n      setLoading(false);\n    };\n    checkAuth();\n  }, []);\n  const login = async (email, password) => {\n    try {\n      const response = await api.post(\"/api/auth/login\", {\n        email,\n        password\n      });\n      const {\n        token,\n        user\n      } = response.data;\n      localStorage.setItem(\"token\", token);\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`;\n      setUser(user);\n      setIsAuthenticated(true);\n      return {\n        success: true\n      };\n    } catch (error) {\n      var _error$response, _error$response$data;\n      console.error(\"Login error:\", error);\n      return {\n        success: false,\n        message: ((_error$response = error.response) === null || _error$response === void 0 ? void 0 : (_error$response$data = _error$response.data) === null || _error$response$data === void 0 ? void 0 : _error$response$data.message) || \"Login failed\"\n      };\n    }\n  };\n  const logout = () => {\n    localStorage.removeItem(\"token\");\n    delete api.defaults.headers.common[\"Authorization\"];\n    setUser(null);\n    setIsAuthenticated(false);\n  };\n  const value = {\n    user,\n    isAuthenticated,\n    loading,\n    login,\n    logout\n  };\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: value,\n    children: !loading && children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 10\n  }, this);\n};\n_s2(AuthProvider, \"MIOyihIJe1jbesOAPrjh1+/HIzc=\");\n_c = AuthProvider;\nvar _c;\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useState","useContext","useEffect","api","jsxDEV","_jsxDEV","AuthContext","useAuth","_s","AuthProvider","children","_s2","user","setUser","isAuthenticated","setIsAuthenticated","loading","setLoading","checkAuth","token","localStorage","getItem","defaults","headers","common","response","get","data","error","console","removeItem","login","email","password","post","setItem","success","_error$response","_error$response$data","message","logout","value","Provider","fileName","_jsxFileName","lineNumber","columnNumber","_c","$RefreshReg$"],"sources":["D:/live project url/live/Event/frontend/src/context/AuthContext.js"],"sourcesContent":["\r\nimport { createContext, useState, useContext, useEffect } from \"react\"\r\nimport api from \"../services/api\"\r\n\r\nconst AuthContext = createContext()\r\n\r\nexport const useAuth = () => useContext(AuthContext)\r\n\r\nexport const AuthProvider = ({ children }) => {\r\n  const [user, setUser] = useState(null)\r\n  const [isAuthenticated, setIsAuthenticated] = useState(false)\r\n  const [loading, setLoading] = useState(true)\r\n\r\n  useEffect(() => {\r\n    // Check if user is logged in\r\n    const checkAuth = async () => {\r\n      const token = localStorage.getItem(\"token\")\r\n\r\n      if (token) {\r\n        try {\r\n          api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\r\n          const response = await api.get(\"/api/users/me\")\r\n          setUser(response.data)\r\n          setIsAuthenticated(true)\r\n        } catch (error) {\r\n          console.error(\"Authentication error:\", error)\r\n          localStorage.removeItem(\"token\")\r\n          delete api.defaults.headers.common[\"Authorization\"]\r\n        }\r\n      }\r\n\r\n      setLoading(false)\r\n    }\r\n\r\n    checkAuth()\r\n  }, [])\r\n\r\n  const login = async (email, password) => {\r\n    try {\r\n      const response = await api.post(\"/api/auth/login\", { email, password })\r\n      const { token, user } = response.data\r\n\r\n      localStorage.setItem(\"token\", token)\r\n      api.defaults.headers.common[\"Authorization\"] = `Bearer ${token}`\r\n\r\n      setUser(user)\r\n      setIsAuthenticated(true)\r\n\r\n      return { success: true }\r\n    } catch (error) {\r\n      console.error(\"Login error:\", error)\r\n      return {\r\n        success: false,\r\n        message: error.response?.data?.message || \"Login failed\",\r\n      }\r\n    }\r\n  }\r\n\r\n  const logout = () => {\r\n    localStorage.removeItem(\"token\")\r\n    delete api.defaults.headers.common[\"Authorization\"]\r\n    setUser(null)\r\n    setIsAuthenticated(false)\r\n  }\r\n\r\n  const value = {\r\n    user,\r\n    isAuthenticated,\r\n    loading,\r\n    login,\r\n    logout,\r\n  }\r\n\r\n  return <AuthContext.Provider value={value}>{!loading && children}</AuthContext.Provider>\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}